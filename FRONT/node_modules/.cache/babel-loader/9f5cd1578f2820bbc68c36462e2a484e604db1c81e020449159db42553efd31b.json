{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\atcan\\\\OneDrive\\\\Desktop\\\\E-Shop\\\\Adopt.Me---Ecommerce\\\\FRONT\\\\src\\\\COMPONENTES\\\\Login\\\\Login.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { LoginContext } from '../Login/loginProvider';\nimport axios from 'axios';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Button, FormLabel, Grid, Input } from '@mui/material';\nimport getusers from \"../../ACTION/getusers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [contrasena, setContrasena] = useState('');\n  const [errorMessage, setErrorMessage] = useState('');\n  const {\n    login\n  } = useContext(LoginContext);\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const usuario = useSelector(state => state.users);\n  const usuario2 = usuario.data;\n  console.log(\"usuario\", usuario);\n  useEffect(() => {\n    dispatch(getusers());\n  });\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:3001/login', {\n        email: email,\n        contrasena: contrasena\n      });\n      localStorage.setItem('token', response.data.token);\n      login();\n      const userId = response.data;\n      const usuario3 = userId ? usuario2.filter(_ref => {\n        let {\n          email\n        } = _ref;\n        return email === userId.email;\n      }) : [];\n      localStorage.setItem('user', JSON.stringify(usuario3));\n      navigate('/homepage');\n    } catch (error) {\n      setErrorMessage('No se pudo iniciar sesión. Por favor, verifique sus credenciales.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginTop: \"15%\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 3,\n      alignItems: \"center\",\n      justify: \"center\",\n      direction: \"column\",\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          width: \"30%\",\n          marginTop: \"2%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"email\",\n          children: \"Correo electr\\xF3nico:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"email\",\n          id: \"email\",\n          name: \"email\",\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true,\n          style: {\n            width: \"80%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          width: \"30%\",\n          marginTop: \"2%\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n          htmlFor: \"password\",\n          children: \"Contrase\\xF1a:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          type: \"password\",\n          id: \"password\",\n          name: \"password\",\n          value: contrasena,\n          onChange: e => setContrasena(e.target.value),\n          required: true,\n          style: {\n            width: \"80%\"\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        style: {\n          marginTop: \"5%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          style: {\n            backgroundColor: \"#063455\"\n          },\n          type: \"submit\",\n          children: \"Iniciar sesi\\xF3n\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this), errorMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 24\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"3Ssn1/4NjX7SiNBssSkVtAtdZg8=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useContext","useEffect","useState","useNavigate","LoginContext","axios","useDispatch","useSelector","Button","FormLabel","Grid","Input","getusers","jsxDEV","_jsxDEV","Login","_s","email","setEmail","contrasena","setContrasena","errorMessage","setErrorMessage","login","navigate","dispatch","usuario","state","users","usuario2","data","console","log","handleSubmit","event","preventDefault","response","post","localStorage","setItem","token","userId","usuario3","filter","_ref","JSON","stringify","error","onSubmit","style","marginTop","children","container","spacing","alignItems","justify","direction","item","xs","width","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","type","id","name","value","onChange","e","target","required","variant","color","backgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/atcan/OneDrive/Desktop/E-Shop/Adopt.Me---Ecommerce/FRONT/src/COMPONENTES/Login/Login.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { LoginContext } from '../Login/loginProvider';\r\nimport axios from 'axios';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Button, FormLabel, Grid, Input } from '@mui/material';\r\nimport getusers from \"../../ACTION/getusers\";\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [contrasena, setContrasena] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const { login } = useContext(LoginContext);\r\n  const navigate = useNavigate();\r\n  const dispatch = useDispatch();\r\n\r\n  const usuario = useSelector((state) => state.users);\r\n  const usuario2 = usuario.data;\r\n  console.log(\"usuario\", usuario)\r\n\r\n  useEffect(() => {\r\n    dispatch(getusers())\r\n  })\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:3001/login', {\r\n        email: email,\r\n        contrasena: contrasena\r\n      });\r\n      localStorage.setItem('token', response.data.token); \r\n      login();\r\n      const userId = response.data;\r\n      const usuario3 = userId ? usuario2.filter(({ email }) => email === userId.email) : [];     \r\n      localStorage.setItem('user', JSON.stringify(usuario3));\r\n      navigate('/homepage');\r\n    } catch (error) {\r\n      setErrorMessage('No se pudo iniciar sesión. Por favor, verifique sus credenciales.');\r\n    }\r\n  };\r\n  \r\n\r\n  return (\r\n\r\n    <form onSubmit={handleSubmit} style={{ marginTop: \"15%\"}}>\r\n\r\n      <Grid container spacing={3} alignItems=\"center\" justify=\"center\" direction=\"column\">\r\n\r\n      <Grid item xs={12} style={{ width: \"30%\", marginTop: \"2%\" }}>\r\n        <FormLabel htmlFor=\"email\">Correo electrónico:</FormLabel>\r\n        <Input type=\"email\" id=\"email\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} required\r\n        style={{ width: \"80%\"}}\r\n        />\r\n      </Grid>\r\n\r\n      <Grid item xs={12} style={{ width: \"30%\", marginTop: \"2%\" }}>\r\n        <FormLabel htmlFor=\"password\">Contraseña:</FormLabel>\r\n        <Input type=\"password\" id=\"password\" name=\"password\" value={contrasena} onChange={(e) => setContrasena(e.target.value)} required\r\n        style={{ width: \"80%\"}}\r\n        />\r\n      </Grid>\r\n\r\n      <Grid item xs={12} style={{ marginTop:\"5%\"}}>\r\n      <Button \r\n      variant=\"contained\" \r\n      color=\"primary\"\r\n       style={{ backgroundColor: \"#063455\" }}\r\n      type=\"submit\">Iniciar sesión</Button>\r\n      </Grid>\r\n\r\n      {errorMessage && <div>{errorMessage}</div>}\r\n      </Grid>\r\n      \r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}